{% extends 'base.html' %}

{% block content %}
<div class="container" style="display: flex; justify-content: center; align-items: center; flex-direction: column; text-align: center;"> <!-- Add text-align: center here -->
{% for message in get_flashed_messages() %}
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
{% endfor %}

<h2>Dashboard</h2>
<br/>

<div class="card user-details"> <!-- Add the user-details class here -->
    <div class="card-header">
        User Details
    </div>
    <div class="card-body">
        <p><strong>Name:</strong> {{ current_user.name }}</p>
        <p><strong>Username:</strong> {{ current_user.username }}</p>
        <p><strong>User ID:</strong> {{ current_user.id }}</p>
        {% if current_user.role == 'manager' %}
            <p><strong>Role:</strong> Manager</p>
            {% if company %}
                <p><strong>Company:</strong> {{ company.name }}</p>
            {% else %}
                <p><strong>Company:</strong> None</p>
            {% endif %}
        {% elif current_user.role == 'employee' %}
            <p><strong>Role:</strong> Employee</p>
            {% if current_user.company %}
                <p><strong>Company:</strong> {{ current_user.company.name }}</p>
            {% else %}
                <p><strong>Company:</strong> None</p>
            {% endif %}
        {% endif %}
    </div>
</div>

{% if current_user.role == 'manager' and not company %}
    <div class="card mt-4">
        <div class="card-header">
            Create a Company
        </div>
        <div class="card-body">
            <form method="POST">
                <div class="mb-3">
                    <label for="company_name" class="form-label">Company Name</label>
                    <input type="text" id="company_name" name="company_name" class="form-control" required>
                </div>
                <div class="form-check">
                    <input type="checkbox" id="work_on_weekends" name="work_on_weekends" class="form-check-input">
                    <label for="work_on_weekends" class="form-check-label">Work on Weekends</label>
                </div>
                <button type="submit" class="btn btn-primary mt-3">Create Company</button>
            </form>
        </div>
    </div>
{% endif %}

{% if current_user.role == 'manager' %}
<div style="text-align: center; margin-top: 20px;">
    <a href="{{ url_for('add_shift') }}" class="btn btn-primary">Add Shift</a>
    <a href="{{ url_for('set_day_override') }}" class="btn btn-secondary">Set Day Override</a>
    <a href="{{ url_for('set_shift_template') }}" class="btn btn-secondary">Set Shift Template</a>
    <a href="{{ url_for('view_day_overrides') }}" class="btn btn-secondary">View Day Override</a>
    <a href="{{ url_for('view_shift_templates') }}" class="btn btn-secondary">View Shift Template</a>
</div>
{% else %}
<div style="text-align: center; margin-top: 20px;">
    <a href="{{ url_for('calendar_data') }}" class="btn btn-primary">View Shifts</a>
</div>
{% endif %}
</div> <!-- Add this line -->
{% endblock %}